# MySQL Role Environment Configuration - Multi-Instance Support
# Copy this to .env and customize for your MySQL deployment

# =============================================================================
# INSTANCE DECLARATIONS
# =============================================================================
# Define all instances to be deployed when running: ./install-role.sh mysql install-all
# Format: INSTANCES="instance1,instance2,instance3"
# Use "default" for the main instance accessible without prefix

INSTANCES="default,dev,prod"

# =============================================================================
# GLOBAL CONFIGURATION (applies to all instances)
# =============================================================================

# Database Configuration (can be overridden per instance)
MYSQL_ROOT_PASSWORD=your-super-secure-root-password-here
MYSQL_DATABASE=homelab
MYSQL_USER=homelab
MYSQL_PASSWORD=your-secure-user-password-here

# MySQL Configuration
MYSQL_PORT=3306
MYSQL_VERSION=8.0

# Network Configuration
EXPOSE_MYSQL=false

# phpMyAdmin Authentication (optional)
# Generate with: htpasswd -nb admin 'yourpassword'
MYSQL_DASHBOARD_AUTH=

# Backup Configuration
MYSQL_BACKUP_RETENTION_DAYS=7
MYSQL_BACKUP_SCHEDULE="0 2 * * *"

# Security Configuration
MYSQL_ALLOW_EMPTY_PASSWORD=false
MYSQL_RANDOM_ROOT_PASSWORD=false

# =============================================================================
# INSTANCE-SPECIFIC CONFIGURATION
# =============================================================================
# Override global settings for specific instances
# Format: <INSTANCE_NAME>_<VARIABLE_NAME>=value

# Default instance configuration (accessed at phpmyadmin.${DOMAIN})
default_MYSQL_DATABASE=homelab
default_MYSQL_USER=homelab
default_MYSQL_DASHBOARD_AUTH=

# Development instance configuration (accessed at dev-phpmyadmin.${DOMAIN})
dev_MYSQL_ROOT_PASSWORD=dev123
dev_MYSQL_DATABASE=homelab_dev
dev_MYSQL_USER=dev_user
dev_MYSQL_PASSWORD=dev123
dev_MYSQL_DASHBOARD_AUTH=
dev_EXPOSE_MYSQL=true

# Production instance configuration (accessed at prod-phpmyadmin.${DOMAIN})
prod_MYSQL_ROOT_PASSWORD=prod-super-secure-password-here
prod_MYSQL_DATABASE=homelab_prod
prod_MYSQL_USER=prod_user
prod_MYSQL_PASSWORD=prod-secure-password-here
prod_MYSQL_DASHBOARD_AUTH=admin:\$2y\$10\$example.hash.here
prod_MYSQL_BACKUP_SCHEDULE="0 1 * * *"  # Daily at 1 AM for prod

# =============================================================================
# USAGE EXAMPLES
# =============================================================================
# Deploy all declared instances:
#   ./install-role.sh mysql install-all
#
# Deploy specific instance:
#   ./install-role.sh mysql dev install
#
# Check status of all instances:
#   ./install-role.sh mysql status-all
#
# Instance access URLs (replace ${DOMAIN} with your domain):
#   • Default: phpmyadmin.${DOMAIN}
#   • Dev: dev-phpmyadmin.${DOMAIN}  
#   • Prod: prod-phpmyadmin.${DOMAIN}
